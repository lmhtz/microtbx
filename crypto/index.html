<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Cryptography - MicroTBX User Manual</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Cryptography";
    var mkdocs_page_input_path = "crypto.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> MicroTBX User Manual</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../apiref/">API Reference</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../misra/">MISRA Compliance</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../license/">Licensing</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../assertions/">Assertions</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../critsect/">Critical Sections</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../heap/">Heap</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../mempools/">Memory Pools</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../lists/">Linked Lists</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../random/">Random Numbers</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../checksum/">Checksums</a>
                    </li>
                </ul>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Cryptography</a>
    <ul class="current">
    </ul>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">MicroTBX User Manual</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Cryptography</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/feaser/microtbx/edit/master/docs/crypto.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p>The cryptography software component contains functionality to encrypt and
decrypt data blocks. Encryption essentially changes the data contents such
that its contents can no longer be interpreted by unwanted third parties. Only
the party that has access to the so called key, with which the data was
encrypted, can decrypt the data contents back into its original state.</p>
<p>Encryption enables you to securely protect data that you don't want anyone else
to have access to. Possible fields of application in an embedded software
program are: securing communication data, securing parameters or other
proprietary data stored in EEPROM, etc.</p>
<p>The cryptography software component is based on 256-bit AES ECB. AES stands for
Advanced Encryption Standard and ECB stands for Electronic CodeBook. The key
needed to perform the actual encryption and decryption is 256-bit in size. In
C code, this is an array of 32 bytes.</p>
<p>The only restriction is that the data to encrypt or decrypt must always be a
multiple of 16 bytes in size. If this is not the case, the data needs to be
aligned to a multiple of 16 bytes prior to performing the encryption/decryption
operation.</p>
<h1 id="usage">Usage</h1>
<p>The first step is to define your 256-bit cryptography key. This is nothing more
than an array of 32 bytes. You can decide on the contents yourself. The only
important part to remember is that you need the same key for both the
encryption and decryption steps, in order to get the original data back when
decrypting the encrypted data. Here is an example of how to define a
cryptography key in C:</p>
<pre><code class="c">/* The 256-bit key that will be used to encrypt and decrypt data. */
const uint8_t cryptoKey[32] =
{
  0x32, 0x72, 0x35, 0x75, 0x38, 0x78, 0x21, 0x41,
  0x25, 0x44, 0x2A, 0x47, 0x2D, 0x4B, 0x61, 0x50,
  0x64, 0x53, 0x67, 0x56, 0x6B, 0x59, 0x70, 0x33,
  0x73, 0x36, 0x76, 0x39, 0x79, 0x24, 0x42, 0x3F
};
</code></pre>

<p>Note that you can use an <a href="https://www.allkeysgenerator.com/Random/Security-Encryption-Key-Generator.aspx">encryption key generator</a> to
assist with getting unique contents for your cryptography key.</p>
<p>To encrypt a 16-byte aligned data block, the function <code>TbxCryptoAes256Encrypt()</code>
is available. To decrypt the data block back to its original state, the function
<code>TbxCryptoAes256Decrypt()</code> can be called.</p>
<h1 id="examples">Examples</h1>
<p>The following code example first encrypts the contents of a data buffer.
Afterwards, the encrypted data is decrypted again. Followed by a verification
to test that the decrypted data actually resembles the original data. The
<code>cryptoKey[]</code> presented above serves as the 256-bit cryptography key:</p>
<pre><code class="c">/* Original data. */
const uint8_t originalData[64] =
{
  0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07,
  0x08, 0x09, 0x0A, 0x0B, 0x0C, 0x0D, 0x0E, 0x0F,
  0x10, 0x11, 0x12, 0x13, 0x14, 0x15, 0x16, 0x17,
  0x18, 0x19, 0x1A, 0x1B, 0x1C, 0x1D, 0x1E, 0x1F,
  0x20, 0x21, 0x22, 0x23, 0x24, 0x25, 0x26, 0x27,
  0x28, 0x29, 0x2A, 0x2B, 0x2C, 0x2D, 0x2E, 0x2F,
  0x30, 0x31, 0x32, 0x33, 0x34, 0x35, 0x36, 0x37,
  0x38, 0x39, 0x3A, 0x3B, 0x3C, 0x3D, 0x3E, 0x3F
};

/* Temporary buffer to storing the encrypted/decrypted data. */
uint8_t buffer[64];

/* Array indexer for looping through array data. */
size_t idx;

/* Copy the original data to the buffer. */
for (idx = 0U; idx &lt; 64U; idx++)
{
  buffer[idx] = originalData[idx];
}

/* Encrypt the data in the buffer. */
TbxCryptoAes256Encrypt(buffer, 64, cryptoKey);

/* Decrypt the data in the buffer. */
TbxCryptoAes256Decrypt(buffer, 64, cryptoKey);

/* Verify that the decrypted data is the same as the original data. */
for (idx = 0U; idx &lt; 64U; idx++)
{
  if (buffer[idx] != originalData[idx])
  {
    TBX_ASSERT(TBX_ERROR);
  }
}
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="../checksum/" class="btn btn-neutral" title="Checksums"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/feaser/microtbx/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../checksum/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
